const fs = require("fs");
const input = fs.readFileSync(0, "utf8").trim().split("\n");

// í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ê°œìˆ˜ ì…ë ¥
const T = Number(input.shift());

// ìƒí•˜ì¢Œìš° ë°©í–¥ ë²¡í„° (dx, dy)
const dir = [
  [-1, 0], // ìœ„ìª½
  [1, 0],  // ì•„ë˜ìª½
  [0, -1], // ì™¼ìª½
  [0, 1],  // ì˜¤ë¥¸ìª½
];

for (let t = 0; t < T; t++) {
  // M: ê°€ë¡œ, N: ì„¸ë¡œ, K: ë°°ì¶” ê°œìˆ˜
  const [M, N, K] = input.shift().split(" ").map(Number);

  // 2ì°¨ì› ë°°ì—´-
  const field = Array.from({ length: M }, () => Array(N).fill(0));

  // ë°°ì¶”ì˜ ìœ„ì¹˜ ì…ë ¥ (ë°°ì¶”ê°€ ìˆëŠ” ìœ„ì¹˜ë¥¼ 1ë¡œ í‘œì‹œ)
  // ë°°ì¶”ì˜ ìœ„ì¹˜ëŠ” (x, y) í˜•íƒœë¡œ ì£¼ì–´ì§
  for (let i = 0; i < K; i++) {
    const [x, y] = input.shift().split(" ").map(Number);
    field[x][y] = 1;
  }

  // BFS íƒìƒ‰ í•¨ìˆ˜ â€” í•œ ë©ì–´ë¦¬ì˜ ë°°ì¶” ê·¸ë£¹(ë²Œë ˆ í•œ ë§ˆë¦¬ í•„ìš”)ì„ íƒìƒ‰
  const bfs = (x, y) => {
    const queue = [[x, y]]; // íƒìƒ‰ ì‹œì‘ì  íì— ì‚½ì…
    field[x][y] = 0;        // ë°©ë¬¸ í‘œì‹œ (0ìœ¼ë¡œ ë§Œë“¤ì–´ ë‹¤ì‹œ ë°©ë¬¸í•˜ì§€ ì•Šê²Œ í•¨)

    while (queue.length) {
      const [cx, cy] = queue.shift(); // í˜„ì¬ ì¢Œí‘œ êº¼ë‚´ê¸°

      // 4ë°©í–¥ìœ¼ë¡œ ì¸ì ‘í•œ ì¹¸ íƒìƒ‰
      for (const [dx, dy] of dir) {
        const nx = cx + dx;
        const ny = cy + dy;

        // ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šê³ 
        // ë°°ì¶”ê°€ ì‹¬ì–´ì ¸ ìˆëŠ” ì¹¸(1)ì´ë¼ë©´
        if (nx >= 0 && ny >= 0 && nx < M && ny < N && field[nx][ny]) {
          field[nx][ny] = 0;     // ë°©ë¬¸ ì²˜ë¦¬
          queue.push([nx, ny]);  // íì— ì‚½ì…í•´ íƒìƒ‰ ê³„ì†
        }
      }
    }
  };

  // ğŸª± ë²Œë ˆ(ë°°ì¶” ë©ì–´ë¦¬)~~ ê°œìˆ˜ ì„¸ê¸°
  let worm = 0;

  // ëª¨ë“  ì¹¸ì„ ìˆœíšŒí•˜ë©´ì„œ ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ë°°ì¶”ê°€ ìˆì„ì‹œã…£
  // ê·¸ ìœ„ì¹˜ì—ì„œ BFS íƒìƒ‰ì„ ì‹œì‘í•´ í•˜ë‚˜ì˜ ê·¸ë£¹ì„ ì°¾ìŒ
  for (let i = 0; i < M; i++) {
    for (let j = 0; j < N; j++) {
      if (field[i][j]) {
        bfs(i, j); // ì—°ê²°ëœ ëª¨ë“  ë°°ì¶”ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ì–´ ë°©ë¬¸ ì²˜ë¦¬
        worm++;    // í•œ ê·¸ë£¹(ë²Œë ˆ í•œ ë§ˆë¦¬) ì¹´ìš´íŠ¸
      }
    }
  }

  // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§ˆë‹¤ ë²Œë ˆ ìˆ˜ ì¶œë ¥
  console.log(worm);
}

// ë°­ì„ 2ì°¨ì› ë°°ì—´ë¡œ ë³´ê³ , ë°°ì¶”ê°€ ìˆëŠ” ì¹¸(1)ì€ ë…¸ë“œ,
// ìƒí•˜ì¢Œìš°ë¡œ ì¸ì ‘í•œ ì¹¸ì€ ê°„ì„ ìœ¼ë¡œ ì—°ê²°ëœë‹¤ê³  ë³¼ ìˆ˜ ì‡ìŠ¨
// ë”°ë¼ì„œ ì—°ê²°ëœ 1ë“¤ì˜ ë¬¶ìŒì˜ ê°œìˆ˜ë¥¼ ì„¸ë©´
// í•„ìš”í•œ ë²Œë ˆì˜ ìˆ˜